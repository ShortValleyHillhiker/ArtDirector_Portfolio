<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>{{ if .IsHome }}{{ site.Title }}{{ else }}{{ printf "%s | %s" .Title site.Title }}{{ end }}</title>

{{- /* Combine and optionally minify + fingerprint CSS files */ -}}
{{- $styles := slice
    (resources.Get "css/variables.css")
    (resources.Get "css/reset.css")
    (resources.Get "css/typography.css")
    (resources.Get "css/main.css")
    (resources.Get "css/queries.css")
  | resources.Concat "css/bundle.css"
-}}

{{- $isOffline := or (eq hugo.Environment "development") (eq site.BaseURL "./") -}}

{{- if $isOffline }}
  <link rel="stylesheet" href="{{ $styles.RelPermalink }}">
{{- else }}
  {{- with $styles | minify | fingerprint }}
    <link rel="stylesheet" href="{{ .RelPermalink }}" crossorigin="anonymous">
  {{- end }}
{{- end }}

<script src="https://unpkg.com/swup@4"></script>

{{- with resources.Get "js/app.js" }}
  {{- if eq hugo.Environment "development" }}
    {{- with . | js.Build }}
      <script src="{{ .RelPermalink }}"></script>
    {{- end }}
  {{- else }}
    {{- $opts := dict "minify" true }}
    {{- with . | js.Build $opts | fingerprint }}
      <script src="{{ .RelPermalink }}" integrity="{{- .Data.Integrity }}" crossorigin="anonymous"></script>
    {{- end }}
  {{- end }}
{{- end }}