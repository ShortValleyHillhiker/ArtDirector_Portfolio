(()=>{var R={spacing:16,baseRadius:4,rippleWidth:24,rippleSpeed:14,dragCooldown:50,maxRipples:25,fadeFactor:.9,frameRate:12,halftoneAnimationSteps:10,halftoneRadiusMultiplier:1.5,rippleScaleMultiplier:2,autoRippleProbability:.1,resizeDebounceTime:100,loopRippleInterval:1500},z={light:{default:"#3a3731",inverted:"#dfe2ca"},dark:{default:"#dfe2ca",inverted:"#3a3731"}},C=window.devicePixelRatio||1,T={},J=!1;function B(){let e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;return J=e,e?z.dark:z.light}T=B();function K(){T=B(),document.querySelectorAll("canvas.ripple-canvas").forEach(e=>{typeof e.initFunction=="function"&&e.initFunction()})}window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",K);function Q(e,t,n,i){let r=Math.floor(t),l=(Math.floor(n)*i+r)*4;if(l<0||l+3>=e.data.length)return 0;let[o,u,a]=e.data.slice(l,l+3);return(.299*o+.587*u+.114*a)/255}function Z(e,t,n,i){let r=[];if(e<=0||t<=0)return r;let s=e-2*i,l=t-2*i,o=Math.floor(Math.max(0,s/n)),u=Math.floor(Math.max(0,l/n)),a=o*n,c=u*n,m=(e-a)/2,g=(t-c)/2;for(let h=0;h<=u;h++)for(let f=0;f<=o;f++)r.push({x:m+f*n,y:g+h*n});return r}function V(e,t,n){let i=e.canvas.closest(".inverted");e.fillStyle=i?T.inverted:T.default;for(let r=0;r<t.length;r++){let{x:s,y:l}=t[r],o=n(t[r]);o<=0||(e.beginPath(),e.arc(Math.round(s),Math.round(l),o,0,Math.PI*2),e.fill())}}function O(e,t,n=R.baseRadius){let i=e.parentElement,r=e.getContext("2d"),s=i.querySelector("img");s&&s.naturalWidth&&s.naturalHeight&&(e.style.aspectRatio=`${s.naturalWidth} / ${s.naturalHeight}`);let l=parseFloat(getComputedStyle(e).width),o=parseFloat(getComputedStyle(e).height);return e.width=l*C,e.height=o*C,r.scale(C,C),Z(l,o,t,n)}function Y(e,t,n){let i=e.getContext("2d"),{resizeDebounceTime:r}=R,s=null,l=!0,o=!1,u=!document.hidden,a=()=>{o||(o=!0,requestAnimationFrame(n))},c=()=>{o=!1},m=()=>{e.isLoop&&(l&&u?e.loopIntervalId||(e.loopIntervalId=setInterval(()=>{e.addRipple(e.clientWidth/2,e.clientHeight/2)},R.loopRippleInterval)):e.loopIntervalId&&(clearInterval(e.loopIntervalId),e.loopIntervalId=null))},g=()=>{u=!document.hidden,u&&l?a():c(),m()};window.addEventListener("resize",()=>{clearTimeout(s),s=setTimeout(()=>{i.setTransform(1,0,0,1,0,0),t()},r)}),document.addEventListener("visibilitychange",g),new IntersectionObserver(([h])=>{l=h.isIntersecting,l&&u?a():c(),m()},{threshold:.1}).observe(e),!o&&u&&a(),e.initFunction=t,e.inView=()=>l,e.animating=()=>o}function ee(e){let{spacing:t,baseRadius:n,halftoneAnimationSteps:i,halftoneRadiusMultiplier:r,frameRate:s}=R,l=1e3/s,o=e.getContext("2d"),a=e.parentElement.querySelector("img");if(!a)return;let c=document.createElement("canvas"),m=c.getContext("2d",{willReadFrequently:!0}),g=[],h=null,f=0,D=!1,M=0,w=()=>{o.clearRect(0,0,e.width,e.height),V(o,g,({x:E,y:S})=>{let H=E*C,b=S*C,A=e.width,d=(1-Q(h,H,b,A))*f;return Math.round(n*d*r)})},v=()=>{m.drawImage(a,0,0,c.width,c.height),h=m.getImageData(0,0,c.width,c.height)},I=()=>{g=O(e,t),c.width=e.width,c.height=e.height,a.complete&&a.naturalWidth&&v()},L=E=>{if(e.animating()){if(E-M>=l&&(M=E,f=Math.min(f+1/i,1),w(),f>=1)){D=!0;return}requestAnimationFrame(L)}},x=()=>{I(),w()};a.onload=x,a.complete&&a.naturalWidth&&x(),Y(e,x,L)}function $(){document.querySelectorAll("canvas.ripple-canvas.halftone").forEach(ee)}function te(e){let{spacing:t,baseRadius:n,rippleWidth:i,rippleSpeed:r,dragCooldown:s,maxRipples:l,fadeFactor:o,frameRate:u,rippleScaleMultiplier:a,autoRippleProbability:c}=R,m=1e3/u,g=e.getContext("2d"),h=e.classList.contains("touch"),f=e.classList.contains("automatic"),D=e.classList.contains("loop"),M=O(e,t),w=[],v=0,I=!1,L=0,x=()=>{I=!1,window.removeEventListener("pointerup",x),window.removeEventListener("pointerleave",x)},E=()=>{I&&x()},S=()=>{g.clearRect(0,0,e.width,e.height),V(g,M,({x:p,y:d})=>{let P=1;for(let y of w){if(y.alpha<.01)continue;let F=p-y.x,W=d-y.y,G=y.radius-i,q=y.radius+i,k=F*F+W*W;if(Math.abs(F)>q||Math.abs(W)>q||k<G*G||k>q*q)continue;let U=Math.sqrt(k),j=Math.abs(U-y.radius);P+=(1-j/i)*y.alpha*a}return Math.round(n*P)})},H=p=>{e.animating()&&(p-v>=m&&(v=p,S(),w=w.map(d=>({...d,radius:d.radius+r,alpha:d.alpha*o})).filter(d=>d.alpha>.01),f&&Math.random()<c&&b(Math.random()*e.clientWidth,Math.random()*e.clientHeight)),requestAnimationFrame(H))},b=(p,d)=>{e.inView()&&(w.length>=l&&w.shift(),w.push({x:p,y:d,radius:0,alpha:1}))};e.addRipple=b,e.isLoop=D;let A=()=>{M=O(e,t),S()};A(),h&&(e.addEventListener("pointerdown",p=>{I=!0;let d=e.getBoundingClientRect();b(p.clientX-d.left,p.clientY-d.top),L=Date.now(),window.addEventListener("pointerup",x),window.addEventListener("pointerleave",E)}),e.addEventListener("pointermove",p=>{if(!I||Date.now()-L<s)return;let d=e.getBoundingClientRect();b(p.clientX-d.left,p.clientY-d.top),L=Date.now()})),Y(e,A,H)}function X(){document.querySelectorAll("canvas.ripple-canvas:not(.halftone)").forEach(te)}var ne=new Swup({plugins:[new SwupHeadPlugin]});function ie(){let e=document.getElementById("context-block"),t=document.getElementById("toggle-context");e&&t&&t.addEventListener("click",()=>{e.style.maxHeight&&e.style.maxHeight!=="0px"?(e.style.maxHeight=`${e.scrollHeight}px`,requestAnimationFrame(()=>{e.style.maxHeight="0px",e.addEventListener("transitionend",function i(){e.style.maxHeight="",e.removeEventListener("transitionend",i)},{once:!0})}),t.classList.remove("active")):(e.style.maxHeight=`${e.scrollHeight}px`,t.classList.add("active"))})}function oe(){document.querySelectorAll(".accordion").forEach(e=>{let t=e.querySelector(".accordion-trigger"),n=e.querySelector(".accordion-content");!t||!n||(n.style.maxHeight=e.classList.contains("is-open")?`${n.scrollHeight}px`:"0",t.onclick=()=>{let i=e.classList.toggle("is-open");n.style.maxHeight=i?`${n.scrollHeight}px`:"0"})})}function re(){let e=document.querySelector("header.main-menu");if(!e)return;let t=!0,n=()=>{let i=window.scrollY,r=t?i<75:i<25;r!==t&&(t=r,e.classList.toggle("top-expanded",t))};window.addEventListener("scroll",n,{passive:!0}),window.addEventListener("load",n),n()}function _(e,t,n){let i=document.querySelectorAll(e);if(!i.length)return;let r=new IntersectionObserver((s,l)=>{s.forEach(o=>{o.isIntersecting&&(t(o.target),l.unobserve(o.target))})},n);i.forEach(s=>r.observe(s))}function le(){_(".test_timeline > div",n=>{n.classList.add("in-view")},{rootMargin:"0px 0px -15% 0px"});let e=document.querySelector(".whatwedo-two > h2"),t=document.querySelector(".whatwedo-two > ul");e&&t&&_(".whatwedo-two > h2",n=>{n.classList.add("in-view"),setTimeout(()=>{t.classList.add("in-view")},350)},{rootMargin:"0px 0px -50% 0px"})}function N(){X(),setTimeout($,50),ie(),le(),oe(),re()}document.addEventListener("DOMContentLoaded",N);ne.hooks.on("page:view",N);})();
